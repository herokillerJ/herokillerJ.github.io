<!DOCTYPE html>
<html lang="zh-cn">
	<head>

		<title>星际公民搜索器</title>
		<!-- 

Get Ready Template

https://templatemo.com/tm-521-get-ready

-->
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<meta name="description" content="">
		<meta name="keywords" content="">
		<meta name="team" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vegas@2.5.4/dist/vegas.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ttskch/select2-bootstrap4-theme@1.5.2/dist/select2-bootstrap4.min.css">
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.18.2/dist/bootstrap-table.min.css">
		<!-- MAIN CSS -->
		<link rel="stylesheet" href="css/search-style.css">

	</head>
	<body>

		<section class="preloader">
			<div class="spinner">

				<span class="spinner-rotate"></span>

			</div>
		</section>


		<!-- GRID LINE -->
		<!-- <section class="grid">
			<div class="container">
				<div class="row">

					<div class="col-md-2 col-sm-2">
						<div class="grid-line"></div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="grid-line"></div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="grid-line"></div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="grid-line"></div>
					</div>
					<div class="col-md-2 col-sm-2">
						<div class="grid-line"></div>
					</div>

				</div>
			</div>
		</section> -->


		<!-- <div class="menu-bg"></div>
		<div class="menu-burger">☰</div>

		<div class="menu-items">
			<div class="container">
				<div class="row">
					<div class="col-md-offset-2 col-md-4 col-sm-6">
						<h1>Navigations</h1>
						<ul class="menu">
							<li><a href="#">Home</a></li>
							<li><a href="#">Our Studio</a></li>
							<li><a href="#">Journal</a></li>
							<li><a href="#">Start a project</a></li>
							<li><a href="#">Email Us</a></li>
						</ul>
					</div>

					<div class="col-md-4 col-sm-6">
						<address>
							<h1>Our Studio</h1>
							<p>1234 New Street View, <br> Kumasi, Ghana</p>
							<div class="google-map">
								<iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1197183.8373802372!2d-1.9415093691103689!3d6.781986417238027!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xfdb96f349e85efd%3A0xb8d1e0b88af1f0f5!2sKumasi+Central+Market!5e0!3m2!1sen!2sth!4v1532967884907"
								 allowfullscreen></iframe>
							</div>
						</address>
					</div>

					<div class="col-md-12 col-sm-12">
						<ul class="social-icon">
							<li class="line"></li>
							<li><a href="https://fb.com/templatemo" class="fa fa-facebook"></a></li>
							<li><a href="#" class="fa fa-twitter"></a></li>
							<li><a href="https://plus.google.com/+templatemo" class="fa fa-google"></a></li>
							<li><a href="#" class="fa fa-instagram"></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>


		<!-- HOME -->
		<section id="home">
			<div class="overlay"></div>
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="home-info">
							<h3><方舟知识协会></h3>
							<h3><罗威尔-自由之风商业贸易中心></h3>
							<h3>By: WFtank、星甲</h3>
							<h1>星际公民商品搜索器</h1>
							<h5>数据版本：<span id="version"></span></h5>
							<div class="row">
								<select id="keywords" class="js-example-basic-single" name="state">
									<option />
								</select>
							</div>
							<div id="load" class="row hidden">
								<div class="col">
									<h3><i class="fa fa-spin fa-spinner"></i> <span>数据加载中</span></h3>
								</div>
							</div>
							<div id="init" class="row hidden">
								<div class="col">
									<h3><i class="fa fa-spin fa-spinner"></i> <span>数据初始化中</span></h3>
								</div>
							</div>
							<div id="toolbar">
								<div class="row localtion btn-group" data-toggle="buttons">
								  <label class="btn btn-secondary localtion">
									<input type="checkbox" name="options" mapping-table="shopBuyTable" id="shopBuyTableInput" autocomplete="off"> 购买信息
								  </label>
								  <label class="btn btn-secondary localtion">
									<input type="checkbox" name="options" mapping-table="shopSellTable" id="shopSellTableInput" autocomplete="off"> 出售信息
								  </label>
								  <label class="btn btn-secondary localtion">
									<input type="checkbox" name="options" mapping-table="shopRentTable" id="shopRentTableInput" autocomplete="off"> 租赁信息
								  </label>
								</div>
							</div>
							<div class="row sc-data hidden">
								<table class="sc-data table" id="baseInfotable"></table>
								<table class="sc-data table location" id="shopBuyTable"></table>
								<table class="sc-data table location" id="shopSellTable"></table>
								<table class="sc-data table location" id="shopRentTable"></table>
								<table class="sc-data table" id="descriptiontable"></table>
								
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
		<!-- SCRIPTS -->
		<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.18.2/dist/bootstrap-table.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.18.2/dist/locale/bootstrap-table-zh-CN.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vegas@2.5.4/dist/vegas.min.js"></script>
		<script src="js/search-custom.js"></script>
		
		<script>
			$('#init').removeClass("hidden");
			
			$(document).ready(function() {
				$.ajax({
					//请求方式
					type: "GET",
					dataType: "json",
					//请求地址
					url: "https://cdn.jsdelivr.net/gh/herokillerJ/starcitizen-data/index.json",
					//请求成功
					success: function(result) {
						$('#version').text(result.version);
						var data = $.map(result.index, function(obj) {
							obj.text = obj.name_cn + "[" + obj.name + "]";
							return obj;
						});
						$('#init').addClass("hidden");
						$('#keywords').select2({
							placeholder: '请输入中/英关键字并选择  （例：箭头）',
							theme: "bootstrap4",
							data: data,
							width: '400px',
							templateSelection: formatState
						});
						// $.getJSON("index.json", function(result) {
						// 	// $.each(result.index, function(index, entity) {
						// 	// 	$('#keywords').append(
						// 	// 		`<option data-path="${entity.path}" value="${entity.id}">${entity.name_cn}[${entity.name}]</option>`);
						// 	// });
						// 	$('#version').text(result.version);
						// 	var data = $.map(result.index, function(obj) {
						// 		obj.text = obj.name_cn + "[" + obj.name + "]";
						// 		return obj;
						// 	});
						// 	$('#init').addClass("hidden");
						// 	$('#keywords').select2({
						// 		placeholder: '请输入中/英关键字并选择  （例：箭头）',
						// 		theme: "bootstrap4",
						// 		data: data,
						// 		width: '400px',
						// 		templateSelection: formatState
						// 	});
						// });
					},
					//请求失败，包含具体的错误信息
					error: function(e) {
						console.log(e.status);
						console.log(e.responseText);
					}
				});

				$('#keywords').on('select2:select', function(e) {
					$('#load').removeClass("hidden");
					$('.sc-data').addClass("hidden");
					$('table.location').each(function(index,ele){
						$(ele).closest('.bootstrap-table.bootstrap4').addClass("hidden");
					});
					var data = e.params.data;
					var version = $('#version').text();
					$.ajax({
						//请求方式
						type: "GET",
						dataType: "json",
						//请求地址
						url: "https://cdn.jsdelivr.net/gh/herokillerJ/starcitizen-data@"+version+"/" + data.path,
						//请求成功
						success: function(result) {
							addData(result);
						},
						//请求失败，包含具体的错误信息
						error: function(e) {
							console.log(e.status);
							console.log(e.responseText);
						},
						//请求完成
						complete: function(e) {
							$('#load').addClass("hidden");
						}
					});
				});
			});
		</script>

	</body>
</html>
